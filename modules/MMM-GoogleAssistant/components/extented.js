class Extented{constructor(t,e){this.config=t,this.sendSocketNotification=e.sendSocketNotification,this.Informations=e.Informations,this.Warning=e.Warning,this.radioStop=e.radioStop,this.YTError=e.YTError,this.timer=null,this.bar=null,this.radio=null,this.createRadio(),this.EXT={GPhotos:{updateTimer:null,albums:null,scanned:[],index:0,needMorePicsFlag:!0,warning:0},radioPlayer:{play:!1,img:null,link:null},radio:!1,speak:!1,locked:!1,youtube:{displayed:!1,id:null,type:null,title:null},photos:{displayed:!1,position:0,urls:null,length:0},links:{displayed:!1,urls:null,length:0,running:!1},spotify:{connected:!1,player:!1,currentVolume:0,targetVolume:this.config.spotify.maxVolume,repeat:null,shuffle:null,forceVolume:!1},radio:{play:!1,img:null,link:null},music:{connected:!1}},console.log("[GA:EXT] ExtentedClass Loaded")}start(t){this.EXT.youtube.displayed&&(this.config.youtube.useVLC?(this.sendSocketNotification("YT_STOP"),this.EXT.youtube.displayed=!1,this.showYT(),this.EXTUnlock(),this.resetYT()):this.YTStopAPI()),this.EXT.music.connected&&this.sendSocketNotification("MUSIC_STOP"),this.EXT.photos.displayed&&(this.resetPhotos(),this.hideDisplay()),this.EXT.links.displayed&&(this.resetLinks(),this.hideDisplay());let e={};logEXT("Response Scan"),e={photos:{position:0,urls:t.photos,length:t.photos.length},links:{urls:t.urls,length:t.urls.length}},this.EXT=this.objAssign({},this.EXT,e),this.config.photos.usePhotos&&this.EXT.photos.length>0?(this.EXTLock(),this.EXT.photos.displayed=!0,this.photoDisplay(),this.showDisplay()):this.EXT.links.length>0&&this.urlsScan(),logEXT("Response Structure:",this.EXT)}photoDisplay(){var t=document.getElementById("EXT_PHOTO");logEXT("Loading photo #"+(this.EXT.photos.position+1)+"/"+this.EXT.photos.length),t.src=this.EXT.photos.urls[this.EXT.photos.position],t.addEventListener("load",(()=>{logEXT("Photo Loaded"),this.timerPhoto=setTimeout((()=>{this.photoNext()}),this.config.photos.displayDelay)}),{once:!0}),t.addEventListener("error",(t=>{this.EXT.photos.displayed&&(logEXT("Photo Loading Error... retry with next"),clearTimeout(this.timerPhoto),this.timerPhoto=null,this.photoNext())}),{once:!0})}photoNext(){this.EXT.photos.position>=this.EXT.photos.length-1?(this.resetPhotos(),this.hideDisplay()):(this.EXT.photos.position++,this.photoDisplay())}resetPhotos(){clearTimeout(this.timerPhoto),this.timerPhoto=null;this.EXT=this.objAssign({},this.EXT,{photos:{displayed:!1,position:0,urls:null,length:0}}),document.getElementById("EXT_PHOTO").removeAttribute("src"),this.config.photos.useGooglePhotosAPI&&this.stopGooglePhotoAPI(),logEXT("Reset Photos",this.EXT)}urlsScan(){if(this.config.youtube.useYoutube){var t=this.EXT.links.urls[0],e=new RegExp("youtube.com/([a-z]+)\\?([a-z]+)=([0-9a-zA-Z-_]+)","ig").exec(t);if(e){let i,s={};if(this.EXT.radioPlayer.play&&this.radioStop(),this.EXT.music.connected&&this.sendSocketNotification("MUSIC_STOP"),this.EXT.spotify.player&&this.config.spotify.useSpotify&&this.sendSocketNotification("SPOTIFY_PAUSE"),"watch"==e[1]&&(i="id"),"playlist"==e[1]&&(i="playlist"),!i)return console.log("[GA:EXT:YouTube] Unknow Type !",e);if(s={id:e[3],type:i},this.EXT.youtube=this.objAssign({},this.EXT.youtube,s),this.EXTLock(),this.config.youtube.useVLC)this.EXT.youtube.displayed=!0,this.showYT(),this.sendSocketNotification("VLC_YOUTUBE",t);else document.getElementById("EXT_YOUTUBE").src="http://youtube.bugsounet.fr/?id="+this.EXT.youtube.id+"&username="+this.config.youtube.username+"&token="+this.config.youtube.token+"&seed="+Date.now();return}}if(this.config.spotify.useSpotify){var i=new RegExp("open.spotify.com/([a-z]+)/([0-9a-zA-Z-_]+)","ig").exec(this.EXT.links.urls[0]);if(i)return this.EXT.radioPlayer.play&&this.radioStop(),this.EXT.music.connected&&this.sendSocketNotification("MUSIC_STOP"),!this.EXT.spotify.connected&&this.config.deviceName&&this.sendSocketNotification("SPOTIFY_TRANSFER",this.config.deviceName),void setTimeout((()=>{let t=i[1],e=i[2];"track"==t?this.sendSocketNotification("SPOTIFY_PLAY",{uris:["spotify:track:"+e]}):this.sendSocketNotification("SPOTIFY_PLAY",{context_uri:"spotify:"+t+":"+e})}),this.config.spotify.playDelay)}this.config.links.useLinks&&(this.EXTLock(),this.EXT.links.displayed=!0,this.linksDisplay())}linksDisplay(){this.EXT.links.running=!1;var t=document.getElementById("EXT_OUTPUT");this.Informations({message:"LinksOpen"}),logEXT("Loading",this.EXT.links.urls[0]),this.showDisplay(),t.src=this.EXT.links.urls[0],t.addEventListener("did-fail-load",(()=>{console.log("[GA:EXT:LINKS] Loading error")})),t.addEventListener("crashed",(t=>{console.log("[GA:EXT:LINKS] J'ai tout pété mon général !!!"),console.log("[GA:EXT:LINKS]",t)})),t.addEventListener("console-message",(t=>{1==t.level&&this.config.debug&&console.log("[GA:EXT:LINKS]",t.message)})),t.addEventListener("did-stop-loading",(()=>{this.EXT.links.running||"about:blank"==t.getURL()||(this.EXT.links.running=!0,logEXT("URL Loaded",t.getURL()),t.executeJavaScript(`\n      var timer = null\n      function scrollDown(posY){\n        clearTimeout(timer)\n        timer = null\n        var scrollHeight = document.body.scrollHeight\n        if (posY == 0) console.log("Begin Scrolling")\n        if (posY > scrollHeight) posY = scrollHeight\n        document.documentElement.scrollTop = document.body.scrollTop = posY;\n        if (posY == scrollHeight) return console.log("End Scrolling")\n        timer = setTimeout(function(){\n          if (posY < scrollHeight) {\n            posY = posY + ${this.config.links.scrollStep}\n            scrollDown(posY);\n          }\n        }, ${this.config.links.scrollInterval});\n      };\n      if (${this.config.links.scrollActivate}) {\n        setTimeout(scrollDown(0), ${this.config.links.scrollStart});\n      };`))})),this.timerLinks=setTimeout((()=>{this.Informations({message:"LinksClose"}),this.resetLinks(),this.hideDisplay()}),this.config.links.displayDelay)}resetLinks(){clearTimeout(this.timerLinks),this.timerLinks=null;this.EXT=this.objAssign({},this.EXT,{links:{displayed:!1,urls:null,length:0,running:!1}}),document.getElementById("EXT_OUTPUT").src="about:blank",logEXT("Reset Links",this.EXT)}showYT(){var t=document.getElementById("EXT_YOUTUBE"),e=document.getElementById("EXT");this.EXT.youtube.displayed?(this.EXTLock(),e.classList.remove("hidden"),t.classList.remove("hidden")):this.EXT.photos.displayed||this.EXT.links.displayed?(e.classList.remove("hidden"),t.classList.add("hidden")):this.hideDisplay()}resetYT(){this.EXT=this.objAssign({},this.EXT,{youtube:{displayed:!1,id:null,type:null,title:null}}),logEXT("Reset YouTube",this.EXT)}castStart(t){this.EXT.youtube.displayed&&(this.config.youtube.useVLC?(this.sendSocketNotification("YT_STOP"),this.EXT.youtube.displayed=!1,this.showYT(),this.resetYT()):this.YTStopAPI()),this.EXT.spotify.connected&&this.EXT.spotify.player&&this.sendSocketNotification("SPOTIFY_PAUSE"),this.EXT.music.connected&&this.sendSocketNotification("MUSIC_STOP"),this.EXT.photos.displayed&&(this.resetPhotos(),this.hideDisplay()),this.EXT.links.displayed&&(this.resetLinks(),this.hideDisplay()),this.EXT.radioPlayer.play&&this.radioStop(),this.EXT.links.running=!1;var e=document.getElementById("EXT_OUTPUT");logEXT("Cast Loading",t),this.EXT.links.displayed=!0,this.EXT.links.running=!0,this.showDisplay(),this.EXTLock(),e.src=t}castStop(){document.getElementById("EXT_OUTPUT");this.resetLinks(),this.hideDisplay()}prepare(){var t=document.getElementById("GAv3"),e=document.createElement("div");e.id="EXT",e.classList.add("hidden");var i=document.createElement("div");i.id="EXT_WINDOW";var s=document.createElement("img");if(s.id="EXT_PHOTO",s.classList.add("hidden"),i.appendChild(s),"Background"==this.config.photos.displayType&&this.prepareGPhotosBackground(),"Recipe"==this.config.photos.displayType){var o=document.createElement("div");o.id="EXT_GPHOTO",o.classList.add("hidden");var n=document.createElement("div");n.id="EXT_GPHOTO_BACK";var a=document.createElement("div");a.id="EXT_GPHOTO_CURRENT",a.addEventListener("animationend",(()=>{a.classList.remove("animated")}));var d=document.createElement("div");d.id="EXT_GPHOTO_INFO",d.innerHTML="Extented GPhotos Loading...",o.appendChild(n),o.appendChild(a),o.appendChild(d),i.appendChild(o)}var l=document.createElement("webview");l.useragent="Mozilla/5.0 (SMART-TV; Linux; Tizen 2.4.0) AppleWebkit/538.1 (KHTML, like Gecko) SamsungBrowser/1.1 TV Safari/538.1",l.id="EXT_OUTPUT",l.scrolling="no",l.classList.add("hidden");var h=document.createElement("webview");return h.id="EXT_YOUTUBE",h.classList.add("hidden"),this.config.youtube.useYoutube&&!this.config.youtube.useVLC&&(h.addEventListener("did-stop-loading",(()=>{"about:blank"==h.getURL()||"http://www.bugsounet.fr/"==h.getURL()?("http://www.bugsounet.fr/"==h.getURL()&&this.Warning({message:"[YouTube Player] Hey, Authentication is needed !!!"}),logEXT("Video Ended"),this.EXT.youtube.displayed=!1,this.EXTUnlock(),this.resetYT()):logEXT("YT Video Loaded",h.getURL())})),h.addEventListener("console-message",(t=>{"about:blank"!=h.getURL()&&this.YTRules(t.message)}))),i.appendChild(h),i.appendChild(l),e.appendChild(i),t.appendChild(e),this.prepareVolume(t),e}YTRules(t){logEXT("Received:",t);const e=t.split(" ");if("[YT]"==e[0])switch(e[1]){case"Status:":this.EXT.youtube.displayed="true"===e[2],this.showYT();break;case"Ended:":"true"===e[2]&&(this.EXTUnlock(),this.resetYT());break;case"Title:":this.EXT.youtube.title=e.slice(2).join(" ");break;case"Error:":this.YTError(error)}}YTStopAPI(){document.getElementById("EXT_YOUTUBE").src="about:blank"}prepareGPhotosBackground(){if(this.config.photos.useGooglePhotosAPI){var t=document.getElementsByClassName("region fullscreen below")[0].querySelector(".container"),e=t.children,i=document.createElement("div");i.id="module_Fake_EXT_GPHOTO",i.classList.add("module","EXT_GPHOTO","hidden");var s=document.createElement("header");s.classList.add("module-header"),s.style.display="none",i.appendChild(s);var o=document.createElement("div");o.classList.add("module-content");var n=document.createElement("div");n.id="EXT_GPHOTO";var a=document.createElement("div");a.id="EXT_GPHOTO_BACK";var d=document.createElement("div");d.id="EXT_GPHOTO_CURRENT",d.addEventListener("animationend",(()=>{d.classList.remove("animated")}));var l=document.createElement("div");l.id="EXT_GPHOTO_INFO",l.innerHTML=this.config.photos.LoadingText,n.appendChild(a),n.appendChild(d),n.appendChild(l),o.appendChild(n),i.appendChild(o),t.insertBefore(i,e[e.length])}}showDisplay(){logEXT("Show Iframe");var t=document.getElementById("EXT_YOUTUBE"),e=document.getElementById("EXT_OUTPUT"),i=document.getElementById("EXT_PHOTO"),s=document.getElementById("EXT_GPHOTO");document.getElementById("EXT").classList.remove("hidden"),this.EXT.links.displayed&&e.classList.remove("hidden"),this.EXT.photos.displayed&&(this.EXT.photos.length>0&&i.classList.remove("hidden"),s.classList.remove("hidden")),this.EXT.photos.forceClose&&i.classList.add("hidden"),this.EXT.youtube.displayed&&t.classList.remove("hidden")}hideDisplay(){logEXT("Hide Iframe");var t=document.getElementById("EXT"),e=document.getElementById("EXT_OUTPUT"),i=document.getElementById("EXT_PHOTO"),s=document.getElementById("EXT_GPHOTO"),o=document.getElementById("EXT_YOUTUBE");this.EXT.youtube.displayed||o.classList.add("hidden"),this.EXT.links.displayed||e.classList.add("hidden"),this.EXT.photos.displayed||(i.classList.add("hidden"),"Recipe"==this.config.photos.displayType&&s.classList.add("hidden")),this.working()||(t.classList.add("hidden"),this.EXTUnlock())}hideSpotify(){var t=document.getElementById("module_EXT_Spotify"),e=document.getElementById("EXT_SPOTIFY");this.timer=null,clearTimeout(this.timer),e.classList.remove("bottomIn"),e.classList.add("bottomOut"),this.timer=setTimeout((()=>{e.classList.add("inactive"),t.style.display="none"}),500)}showSpotify(){var t=document.getElementById("module_EXT_Spotify"),e=document.getElementById("EXT_SPOTIFY");t.style.display="block",e.classList.remove("bottomOut"),e.classList.add("bottomIn"),e.classList.remove("inactive")}EXTLock(){this.EXT.locked||(logEXT("Lock Screen"),MM.getModules().enumerate((t=>{t.hide(15,{lockString:"EXT_LOCKED"})})),this.EXT.spotify.connected&&this.config.spotify.useBottomBar&&this.hideSpotify(),this.config.screen.useScreen&&this.sendSocketNotification("SCREEN_LOCK",!0),this.EXT.locked=!0)}EXTUnlock(){this.EXT.locked&&!this.working()&&(logEXT("Unlock Screen"),MM.getModules().enumerate((t=>{t.show(15,{lockString:"EXT_LOCKED"})})),this.EXT.spotify.connected&&this.config.spotify.useBottomBar&&this.showSpotify(),this.config.screen.useScreen&&!this.EXT.spotify.connected&&this.sendSocketNotification("SCREEN_LOCK",!1),this.EXT.locked=!1)}objAssign(t){for(var e,i,s=Array.prototype.slice.call(arguments,1);s.length;)for(i in e=s.shift())e.hasOwnProperty(i)&&("object"==typeof t[i]&&t[i]&&"[object Array]"!==Object.prototype.toString.call(t[i])&&"object"==typeof e[i]&&null!==e[i]?t[i]=this.objAssign({},t[i],e[i]):t[i]=e[i]);return t}working(){return this.EXT.youtube.displayed||this.EXT.photos.displayed||this.EXT.links.displayed}prepareBody(){document.body.id="EXT_SCREEN_ANIMATE",document.body.className="animate__animated",document.body.style.setProperty("--animate-duration","1s")}prepareVolume(t){var e=document.createElement("div");e.id="EXT_VOLUME",e.classList.add("hidden"),e.className="hidden animate__animated",e.style.setProperty("--animate-duration","1s");var i=document.createElement("div");i.id="EXT_VOLUME_TEXT",e.appendChild(i);var s=document.createElement("div");return s.id="EXT_VOLUME_BAR",e.appendChild(s),t.appendChild(e),e}drawVolume(t){var e=document.getElementById("EXT_VOLUME");e.classList.remove("hidden","animate__zoomOut"),e.classList.add("animate__zoomIn"),document.getElementById("EXT_VOLUME_TEXT").innerHTML=this.config.volume.volumeText+" "+t+"%",document.getElementById("EXT_VOLUME_BAR").style.width=t+"%",setTimeout((()=>{e.classList.remove("animate__zoomIn"),e.classList.add("animate__zoomOut"),e.addEventListener("animationend",(t=>{"flipOutX"==t.animationName&&"EXT_VOLUME"==t.path[0].id&&e.classList.add("hidden"),t.stopPropagation()}),{once:!0})}),3e3)}updatePhotos(){if(0==this.EXT.GPhotos.scanned.length)return console.log("!!! GPhotos debug: "+this.EXT.GPhotos.scanned.length),void this.sendSocketNotification("GP_MORE_PICTS");this.EXT.GPhotos.index<0&&(this.EXT.GPhotos.index=0),this.EXT.GPhotos.index>=this.EXT.GPhotos.scanned.length&&(this.EXT.GPhotos.index=0);var t=this.EXT.GPhotos.scanned[this.EXT.GPhotos.index];if(this.config.photos.hiResolution)var e=t.baseUrl+"=w1080-h1920";else e=t.baseUrl;this.ready(e,t),this.EXT.GPhotos.index++,this.EXT.GPhotos.index>=this.EXT.GPhotos.scanned.length&&(this.EXT.GPhotos.index=0,this.EXT.GPhotos.needMorePicsFlag=!0,"Recipe"==this.config.photos.displayType&&this.hideGooglePhotoAPI()),this.EXT.GPhotos.needMorePicsFlag&&this.sendSocketNotification("GP_MORE_PICTS")}ready(t,e){var i=document.createElement("img");i.onerror=()=>{console.log("[GA:EXT:GPHOTOS] Image load fails."),this.Informations({message:"GPFailedOpenURL"}),this.sendSocketNotification("GP_LOAD_FAIL",t)},i.onload=()=>{var i=document.getElementById("EXT_GPHOTO_BACK"),s=document.getElementById("EXT_GPHOTO_CURRENT");document.getElementById("EXT_GPHOTO");i.style.backgroundImage=`url(${t})`,s.style.backgroundImage=`url(${t})`,s.classList.add("animated");var o=document.getElementById("EXT_GPHOTO_INFO"),n=this.EXT.GPhotos.albums.find((t=>t.id==e._albumId));o.innerHTML="";var a=document.createElement("div");a.classList.add("albumCover"),void 0!==n&&(a.style.backgroundImage=`url(modules/MMM-GoogleAssistant/tmp/cache/${n.id})`);var d=document.createElement("div");d.classList.add("albumTitle"),d.innerHTML=this.config.photos.GPAlbumName+" "+n.title;var l=document.createElement("div");l.classList.add("photoTime"),l.innerHTML="relative"==this.config.photos.timeFormat?moment(e.mediaMetadata.creationTime).fromNow():moment(e.mediaMetadata.creationTime).format(this.config.photos.timeFormat);var h=document.createElement("div");h.classList.add("infoText"),o.appendChild(a),h.appendChild(d),h.appendChild(l),o.appendChild(h),logEXT("GPHOTOS: Image loaded ["+this.EXT.GPhotos.index+"/"+this.EXT.GPhotos.scanned.length+"]:",t),this.sendSocketNotification("GP_LOADED",t)},i.src=t}showGooglePhotoAPI(){if(0==this.EXT.GPhotos.scanned.length){if(clearTimeout(this.EXT.GPhotos.updateTimer),this.EXT.GPhotos.updateTimer=null,this.Informations({message:"GPNoPhotoFound"}),this.sendSocketNotification("GP_MORE_PICTS"),this.EXT.GPhotos.warning++,this.EXT.GPhotos.warning>=5)return this.Warning({message:"GPError"}),void(this.EXT.GPhotos.warning=0);this.EXT.GPhotos.updateTimer=setInterval((()=>{this.showBackgroundGooglePhotoAPI()}),15e3)}else this.Informations({message:"GPOpen"}),clearTimeout(this.EXT.GPhotos.updateTimer),this.EXT.GPhotos.updateTimer=null,this.EXTLock(),this.EXT.photos.displayed=!0,this.showDisplay(),this.updatePhotos(),this.EXT.GPhotos.updateTimer=setInterval((()=>{this.updatePhotos()}),this.config.photos.displayDelay)}hideGooglePhotoAPI(){this.stopGooglePhotoAPI(),this.EXTUnlock(),this.EXT.photos.displayed=!1,this.hideDisplay()}showBackgroundGooglePhotoAPI(){if(0==this.EXT.GPhotos.scanned.length){if(clearTimeout(this.EXT.GPhotos.updateTimer),this.EXT.GPhotos.updateTimer=null,this.Informations({message:"GPNoPhotoFound"}),this.sendSocketNotification("GP_MORE_PICTS"),this.EXT.GPhotos.warning++,this.EXT.GPhotos.warning>=5)return this.Warning({message:"GPError"}),void(this.EXT.GPhotos.warning=0);this.EXT.GPhotos.updateTimer=setInterval((()=>{this.showBackgroundGooglePhotoAPI()}),15e3)}else this.EXT.GPhotos.albums&&this.Informations({message:"GPOpen"}),clearTimeout(this.EXT.GPhotos.updateTimer),this.EXT.GPhotos.updateTimer=null,this.updatePhotos(),this.EXT.GPhotos.updateTimer=setInterval((()=>{this.updatePhotos()}),this.config.photos.displayDelay)}stopGooglePhotoAPI(){this.Informations({message:"GPClose"}),clearInterval(this.EXT.GPhotos.updateTimer),this.EXT.GPhotos.updateTimer=null}prepareBar(){"Bar"!=this.config.screen.displayStyle&&(this.bar=new ProgressBar[this.config.screen.displayStyle](document.getElementById("EXT_SCREEN_BAR"),{strokeWidth:"Line"==this.config.screen.displayStyle?2:5,trailColor:"#1B1B1B",trailWidth:1,easing:"easeInOut",duration:500,svgStyle:null,from:{color:"#FF0000"},to:{color:"#00FF00"},text:{style:{position:"absolute",left:"50%",top:"Line"==this.config.screen.displayStyle?"0":"50%",padding:0,margin:0,transform:{prefix:!0,value:"translate(-50%, -50%)"}}}}))}screenShowing(){if(this.config.screen.animateBody&&this.init&&(clearTimeout(this.awaitBeforeTurnOnTimer),this.awaitBeforeTurnOnTimer=null),MM.getModules().enumerate((t=>{t.show(500,{lockString:"EXT_SCREEN"})})),!this.init)return this.init=!0;this.config.screen.animateBody&&(document.body.classList.remove("animate__zoomOut"),document.body.classList.add("animate__zoomIn"))}screenHiding(){this.config.screen.animateBody?(clearTimeout(this.awaitBeforeTurnOnTimer),this.awaitBeforeTurnOnTimer=null,document.body.classList.remove("animate__zoomIn"),document.body.classList.add("animate__zoomOut"),document.body.addEventListener("animationend",(t=>{"zoomOut"==t.animationName&&"EXT_SCREEN_ANIMATE"==t.path[0].id&&MM.getModules().enumerate((t=>{t.hide(1e3,{lockString:"EXT_SCREEN"})}))}),{once:!1})):MM.getModules().enumerate((t=>{t.hide(1e3,{lockString:"EXT_SCREEN"})}))}createRadio(){this.radio=new Audio,this.radio.addEventListener("ended",(()=>{logEXT("Radio ended"),this.EXT.radioPlayer.play=!1,this.showRadio()})),this.radio.addEventListener("pause",(()=>{logEXT("Radio paused"),this.EXT.radioPlayer.play=!1,this.showRadio()})),this.radio.addEventListener("abort",(()=>{logEXT("Radio aborted"),this.EXT.radioPlayer.play=!1,this.showRadio()})),this.radio.addEventListener("error",(t=>{logEXT("Radio error: "+t),this.EXT.radioPlayer.play=!1,this.showRadio()})),this.radio.addEventListener("loadstart",(()=>{logEXT("Radio started"),this.EXT.radioPlayer.play=!0,this.radio.volume=.6,this.showRadio()}))}showRadio(){this.EXT.radioPlayer.img&&(this.EXT.radioPlayer.play?this.showDivWithAnimatedFlip("EXT_RADIO"):this.hideDivWithAnimatedFlip("EXT_RADIO")),this.EXT.radioPlayer.play?(this.sendSocketNotification("SCREEN_WAKEUP"),this.hideDivWithAnimatedFlip("EXT_SCREEN_CONTENER"),this.sendSocketNotification("SCREEN_LOCK",!0)):(this.sendSocketNotification("SCREEN_LOCK",!1),this.showDivWithAnimatedFlip("EXT_SCREEN_CONTENER"))}hideDivWithAnimatedFlip(t){var e=document.getElementById(t);e.classList.remove("animate__flipInX"),e.classList.add("animate__flipOutX"),e.addEventListener("animationend",(i=>{"flipOutX"==i.animationName&&i.path[0].id==t&&e.classList.add("hidden"),i.stopPropagation()}),{once:!0})}showDivWithAnimatedFlip(t){var e=document.getElementById(t);e.classList.remove("hidden"),e.classList.remove("animate__flipOutX"),e.classList.add("animate__flipInX")}awaitBeforeWakeUp(t=3e3){return new Promise((e=>{this.awaitBeforeTurnOnTimer=setTimeout(e,t)}))}}